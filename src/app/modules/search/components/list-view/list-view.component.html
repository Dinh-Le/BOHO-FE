<div class="top">
  <div class="event-image">
    <app-event-image
      *ngIf="currentEvent"
      [event]="currentEvent.data"
      (click)="onClick.emit(currentEvent)"
    ></app-event-image>
  </div>
  <div class="event-detail">
    <div class="event-prop">
      <label class="prop-label">Đối tượng:</label>
      <app-svg-icon
        *ngIf="currentEvent"
        [icon]="currentEvent.objectIcon"
        width="24px"
        height="24px"
      ></app-svg-icon>
    </div>
    <div class="event-prop">
      <label class="prop-label">Biển số:</label>
      <p>
        {{ licensePlate }}
      </p>
    </div>
    <div class="event-prop">
      <label class="prop-label">NSX, Model, Màu:</label>
      <p>
        {{ model }}
        {{ color }}
      </p>
    </div>
    <div class="event-prop">
      <label class="prop-label">Nội dung:</label>
      <p>{{ alarmType | translate }}</p>
    </div>
    <div class="event-prop">
      <label class="prop-label">Thời gian:</label>
      <p *ngIf="currentEvent">
        {{ detectionTime | datetime : "DD/MM/YYYY H:mm:ss" }}
      </p>
    </div>
    <div class="event-prop">
      <label class="prop-label">Địa điểm:</label>
      <p>
        {{ address }}
      </p>
    </div>
  </div>
</div>
<div class="bottom event-list">
  <table>
    <colgroup>
      <col width="32" />
      <col span="2" width="150" class="text-center" />
      <col width="200" />
    </colgroup>
    <thead class="sticky-top bg-black">
      <th></th>
      <th>Hình ảnh</th>
      <th>Đối tượng</th>
      <th>Màu</th>
      <th>Nội dung</th>
      <th>Địa điểm</th>
    </thead>
    <tbody>
      <tr
        *ngFor="let item of events"
        (click)="currentEvent = item"
        [class.active]="
          currentEvent && item.data.event_id === currentEvent.data.event_id
        "
        class="event-container"
      >
        <td>
          <label class="custom-checkbox" (click)="$event.stopPropagation()"
            ><input
              type="checkbox"
              [(ngModel)]="item.selected"
              (ngModelChange)="onChange.emit(item)"
          /></label>
        </td>
        <td>
          <app-event-image
            class="crop-image"
            [event]="item.data"
            type="crop"
          ></app-event-image>
        </td>
        <td>
          <app-svg-icon [icon]="item.objectIcon" width="32px" height="32px"></app-svg-icon>
        </td>
        <td>
          {{ item.data.images_info[0].recognize_result?.color }}
        </td>
        <td>
          {{ item.data.alarm_type | translate }}
        </td>
        <td>
          {{ item.address }}
        </td>
      </tr>
      <tr *ngIf="events.length === 0">
        <td colspan="6" class="text-center py-2">No data</td>
      </tr>
    </tbody>
  </table>
</div>
