<div class="patrol-container full-height">
  <div class="patrol">
    <app-editable-list-view
      [items]="patrols"
      title="Tuần tra"
      (save)="save($event)"
      (remove)="remove($event)"
      (change)="onPatrolSelected($event)"
    ></app-editable-list-view>
    <div class="d-flex mt-3 justify-content-center">
      <button class="my-button submit mx-2" (click)="add()">Thêm</button>
      <button
        class="my-button submit mx-2"
        (click)="play(snapshot)"
        [disabled]="patrolManagementList.length === 0"
      >
        Chạy
      </button>
    </div>
  </div>
  <div class="preview">
    <div class="text-white">Xem trước:</div>
    <div class="d-flex justify-content-start">
      <div
        class="ratio ratio-16x9 border border-1 border-light"
        style="width: 320px"
      >
        <img #snapshot class="w-100" />
      </div>
    </div>
  </div>
  <div class="preset-management">
    <div class="preset-management left">
      <div class="table-wrapper">
        <table>
          <colgroup>
            <col width="auto" />
            <col span="2" width="150" />
            <col width="32" />
          </colgroup>
          <thead>
            <th>Điểmm giám sát</th>
            <th>Thời gian dừng (s)</th>
            <th>Thời gian chuyển (s)</th>
            <th></th>
          </thead>
          <tbody>
            <tr
              *ngFor="let item of patrolManagementList; trackBy: trackById"
              [class.active]="item.isRunning"
            >
              <td>{{ item.presetName }}</td>
              <td>
                {{ item.stand_time }}
              </td>
              <td>
                {{ item.moving_time }}
              </td>
              <td>
                <i
                  class="func-button bi bi-trash-fill"
                  (click)="detetePatrolManagement(item)"
                ></i>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="preset-management right">
      <button
        type="button"
        (click)="addPatrolManagement()"
        [disabled]="!selectedPatrol"
      >
        Thêm
      </button>
      <button
        type="button"
        (click)="updatePatrolManagementList()"
        [disabled]="!selectedPatrol || patrolManagementList.length === 0"
      >
        Lưu
      </button>
    </div>
  </div>
</div>
